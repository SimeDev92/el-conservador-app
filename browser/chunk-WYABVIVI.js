import{D as G,J as N,K as q,V as z,b as L,i as V,ia as H,ja as U,k as j,ka as X,m as W,q as R,z as B}from"./chunk-WRRNA3JR.js";import{Ab as l,Bb as i,Gb as x,Jb as P,Lb as m,Pc as I,Qc as O,Vb as a,Vc as k,Xb as D,Yb as y,Za as c,Zb as C,_a as M,_b as S,ba as T,f,ka as A,la as F,ob as h,ta as u,tb as d,ua as p}from"./chunk-BUN7TGPH.js";var Q="https://js.stripe.com/v3",te=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,J="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ne=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Q,'"]')),e=0;e<t.length;e++){var n=t[e];if(te.test(n.src))return n}return null},K=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Q).concat(e);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},oe=function(t,e){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"4.7.0",startTime:e})},_=null,E=null,w=null,ie=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},re=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}},ae=function(t){return _!==null?_:(_=new Promise(function(e,n){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&t&&console.warn(J),window.Stripe){e(window.Stripe);return}try{var o=ne();if(o&&t)console.warn(J);else if(!o)o=K(t);else if(o&&w!==null&&E!==null){var s;o.removeEventListener("load",w),o.removeEventListener("error",E),(s=o.parentNode)===null||s===void 0||s.removeChild(o),o=K(t)}w=re(e,n),E=ie(n),o.addEventListener("load",w),o.addEventListener("error",E)}catch(g){n(g);return}}),_.catch(function(e){return _=null,Promise.reject(e)}))},le=function(t,e,n){if(t===null)return null;var o=t.apply(void 0,e);return oe(o,n),o},v,Y=!1,Z=function(){return v||(v=ae(null).catch(function(t){return v=null,Promise.reject(t)}),v)};Promise.resolve().then(function(){return Z()}).catch(function(r){Y||console.warn(r)});var $=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Y=!0;var o=Date.now();return Z().then(function(s){return le(s,e,o)})};function ce(r,t){if(r&1&&(l(0,"mat-radio-button",19),a(1),i()),r&2){let e=t.$implicit;d("value",e),c(),D(" ",e,"\u20AC ")}}function de(r,t){if(r&1){let e=x();l(0,"div",16)(1,"h3"),a(2,"Elige la cantidad que deseas donar:"),i(),l(3,"mat-radio-group",9),S("ngModelChange",function(o){u(e);let s=m();return C(s.selectedAmount,o)||(s.selectedAmount=o),p(o)}),h(4,ce,2,2,"mat-radio-button",17),i(),l(5,"button",18),P("click",function(){u(e);let o=m();return p(o.processSingleDonation())}),a(6,"Donar ahora"),i()()}if(r&2){let e=m();c(3),y("ngModel",e.selectedAmount),c(),d("ngForOf",e.singleDonationAmounts)}}function me(r,t){if(r&1&&(l(0,"mat-radio-button",19),a(1),i()),r&2){let e=t.$implicit;d("value",e),c(),D(" ",e,"\u20AC/mes ")}}function ue(r,t){if(r&1){let e=x();l(0,"div",16)(1,"h3"),a(2,"Elige un monto para la donaci\xF3n mensual:"),i(),l(3,"mat-radio-group",9),S("ngModelChange",function(o){u(e);let s=m();return C(s.selectedAmount,o)||(s.selectedAmount=o),p(o)}),h(4,me,2,2,"mat-radio-button",17),i(),l(5,"button",18),P("click",function(){u(e);let o=m();return p(o.processMonthlyDonation())}),a(6,"Donar mensualmente"),i()()}if(r&2){let e=m();c(3),y("ngModel",e.selectedAmount),c(),d("ngForOf",e.monthlyDonationAmounts)}}var b=class r{constructor(t,e){this.http=t;this.router=e}stripePromise=$("tu_stripe_public_key");donationType="single";selectedAmount=null;singleDonationAmounts=[1,5,10,20,50,100];monthlyDonationAmounts=[5,10,20,50];processSingleDonation(){return f(this,null,function*(){if(!this.selectedAmount){alert("Por favor, selecciona un monto de donaci\xF3n.");return}let t=this.getPriceIdForAmount(this.selectedAmount,"single");if(!t){alert("El monto seleccionado no es v\xE1lido.");return}this.http.post("http://localhost:3000/payments/create-checkout-session",{priceId:t}).subscribe(e=>f(this,null,function*(){(yield this.stripePromise)?.redirectToCheckout({sessionId:e.sessionId})}),e=>{console.error("Error al crear la sesi\xF3n de pago:",e)})})}processMonthlyDonation(){return f(this,null,function*(){if(!this.selectedAmount){alert("Por favor, selecciona un monto de donaci\xF3n mensual.");return}let t=this.getPriceIdForAmount(this.selectedAmount,"monthly");if(!t){alert("El monto seleccionado no es v\xE1lido.");return}this.http.post("http://localhost:3000/payments/create-checkout-session",{priceId:t}).subscribe(e=>f(this,null,function*(){(yield this.stripePromise)?.redirectToCheckout({sessionId:e.sessionId})}),e=>{console.error("Error al crear la sesi\xF3n de pago:",e)})})}getPriceIdForAmount(t,e){let n={single:{1:"price_id_1",5:"price_id_5",10:"price_id_10",20:"price_id_20",50:"price_id_50",100:"price_id_100"},monthly:{5:"price_id_monthly_5",10:"price_id_monthly_10",20:"price_id_monthly_20",50:"price_id_monthly_50"}};return n[e]&&n[e][t]!==void 0?n[e][t]:null}openExternalLink(t){window.open(t,"_blank")}static \u0275fac=function(e){return new(e||r)(M(L),M(V))};static \u0275cmp=A({type:r,selectors:[["app-donations"]],decls:52,vars:3,consts:[["group","matButtonToggleGroup"],[1,"container","p-2"],[1,"donations-container"],[1,"patriotic-title"],[1,"patriotic-subtitle"],[1,"content-value","patriotic-card"],[1,"donation-options","patriotic-card"],[1,"donation-type-selection"],["for","donationType"],[3,"ngModelChange","ngModel"],["value","single"],["value","monthly"],["class","donation-amounts",4,"ngIf"],[1,"impact","patriotic-card"],[1,"patriotic-list"],[1,"gratitude","patriotic-card"],[1,"donation-amounts"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",1,"donation-btn",3,"click"],[3,"value"]],template:function(e,n){if(e&1){let o=x();l(0,"div",1)(1,"div",2)(2,"h1",3),a(3,"Apoya a El Conservador"),i(),l(4,"p",4),a(5,"Ayuda a El Conservador a seguir publicando contenido independiente y de calidad."),i(),l(6,"mat-card",5)(7,"h2"),a(8,"El valor de nuestro contenido"),i(),l(9,"p"),a(10,"Detr\xE1s de cada art\xEDculo, investigaci\xF3n y an\xE1lisis hay un equipo de profesionales dedicados. Tu apoyo nos permite mantener nuestra independencia y continuar ofreciendo informaci\xF3n rigurosa y relevante."),i()(),l(11,"mat-card",6)(12,"h2"),a(13,"Opciones de donaci\xF3n"),i(),l(14,"div",7)(15,"label",8),a(16,"Selecciona el tipo de donaci\xF3n:"),i(),l(17,"mat-button-toggle-group",9,0),S("ngModelChange",function(g){return u(o),C(n.donationType,g)||(n.donationType=g),p(g)}),l(19,"mat-button-toggle",10),a(20,"Donaci\xF3n \xFAnica"),i(),l(21,"mat-button-toggle",11),a(22,"Donaci\xF3n mensual"),i()()(),h(23,de,7,2,"div",12)(24,ue,7,2,"div",12),i(),l(25,"mat-card",13)(26,"h2"),a(27,"Tu impacto"),i(),l(28,"p"),a(29,"Gracias a las donaciones de lectores como t\xFA, podemos:"),i(),l(30,"ul",14)(31,"li")(32,"mat-icon"),a(33,"check"),i(),a(34," Mantener nuestra independencia editorial"),i(),l(35,"li")(36,"mat-icon"),a(37,"check"),i(),a(38," Investigar temas de relevancia nacional"),i(),l(39,"li")(40,"mat-icon"),a(41,"check"),i(),a(42," Ofrecer an\xE1lisis profundos y objetivos"),i(),l(43,"li")(44,"mat-icon"),a(45,"check"),i(),a(46," Dar voz a historias que otros medios ignoran"),i()()(),l(47,"mat-card",15)(48,"h2"),a(49,"Gracias por tu apoyo"),i(),l(50,"p"),a(51,"Cada donaci\xF3n, grande o peque\xF1a, nos ayuda a seguir dando vida a esta plataforma y a mantener informada a nuestra sociedad."),i()()()()}e&2&&(c(17),y("ngModel",n.donationType),c(6),d("ngIf",n.donationType==="single"),c(),d("ngIf",n.donationType==="monthly"))},dependencies:[I,O,W,R,z,N,q,H,U,B,G],styles:[".donations-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}h1[_ngcontent-%COMP%]{color:#c60b1e;font-size:2.5em;text-align:center;margin-bottom:20px}h2[_ngcontent-%COMP%]{color:#004080;font-size:1.8em;margin-top:30px;text-align:center}h3[_ngcontent-%COMP%]{color:#004080;font-size:1.5em;text-align:center}p[_ngcontent-%COMP%]{line-height:1.6;color:#333}.patriotic-subtitle[_ngcontent-%COMP%]{text-align:center}mat-card[_ngcontent-%COMP%]{margin-bottom:40px;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 4px #0000001a}.donation-btn[_ngcontent-%COMP%]{background-color:#06c;color:#fff;padding:10px 30px;font-size:1.1rem;border-radius:25px;transition:background-color .3s,transform .3s;display:block;margin:10px auto}.donation-btn[_ngcontent-%COMP%]:hover{background-color:#036;transform:scale(1.05)}ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}li[_ngcontent-%COMP%]{margin-bottom:10px;padding-left:20px;position:relative}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffc400}.donation-type-selection[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.donation-amounts[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]})};var ee=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=F({type:r});static \u0275inj=T({imports:[k,j.forChild([{path:"",component:b}]),X]})};export{ee as DonationsModule};
